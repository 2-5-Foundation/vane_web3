datasource db {
    provider = "sqlite"
    url      = "file:./dev.db"
}

generator client {
  provider = "cargo run -p prisma"
  output   = "src/db.rs"
}

// ========================================user======================================

// User can have multiple address per chain network
model UserAccount {
    id                Int               @id @default(autoincrement())
    username          String             // string
    accountId         String
    networkId         String             // string or enum encoded
}

model Port {
    id                Int               @id @default(autoincrement())
    rpcPort           BigInt
    p2pPort           BigInt
}

// ===========================================Tx=======================================
model TransactionsData {
    id                Int               @id @default(autoincrement())
    successValue      BigInt               // amount
    failedValue       BigInt               // amount
}

model Transaction {
    id                Int               @id @default(autoincrement())
    txHash            Bytes             // string encoded
    value             BigInt            // amount
    network           String             // string or enum encoded
    status            Boolean
}

// store the current nonce/ transaction count
model Nonce {
    id                Int               @id @default(autoincrement())
    nonce             Int
}

// =========================================User Peer Ids=======================================
model UserPeerAccountInfo{
    id                String              @id @default(uuid())
    accountId         String
    network           String
    userPeer          UserPeer            @relation(fields: [userPeerId], references: [id])
    userPeerId        String
}
model UserPeer {
    id                String              @id
    peerId            String              @unique // String or data structure encoded
    accounts          UserPeerAccountInfo[]
    multiAddr         String             // String or enum
    keypair           Bytes             // ed25519 node keypair encoded and encrypted
}

// =========================================Saved Peer Ids======================================
model SavedPeerAccountInfo{
    id                String              @id @default(uuid())
    accountId         String
    network           String
    savedPeer         SavedPeers          @relation(fields: [savedPeerId], references: [id])
    savedPeerId       String
}
model SavedPeers {
    id                String              @id @default(uuid())
    nodeId            String              @unique
    accounts          SavedPeerAccountInfo[]
    multiAddr         String
}